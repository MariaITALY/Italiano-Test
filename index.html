<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mini Test Italiano</title>
<link rel="icon" href="icon.png" type="image/png" />
<style>
/* ===== Визуал как в рабочей версии ===== */
body {
font-family: sans-serif;
margin: 0; padding: 0;
min-height: 100vh;
display: flex; justify-content: center; align-items: flex-start;
background: linear-gradient(to right, #b0e0a8, #ffffff, #f4b0b0); /* пастельные цвета итальянского флага, горизонтально */
}
.container {
position: relative;
z-index: 2;
max-width: 800px; width: 100%;
margin: 20px;
background: #fff; border-radius: 12px;
padding: 25px 20px;
box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
h2 { text-align: center; color: #4a4a4a; margin: 0 0 10px; }
h3 { margin-top: 10px; color: #4a4a4a; }

button, .option {
display: block;
width: 100%;
padding: 12px 15px;
margin: 8px 0;
border: none; border-radius: 8px;
cursor: pointer;
font-size: 1rem;
transition: all 0.25s ease;
}
.category-btn { background: #d4e2f4; color: #333; }
.category-btn:hover { background: #a8c8ea; }
.card-btn { background: #d4f4e2; color: #333; }
.card-btn:hover { background: #a8eac8; }
.option { background: #f0f0f0; color: #333; }
.option:hover { background: #e3e3e3; }
.correct { background: #6cc37e !important; color: #fff; }
.wrong { background: #e46b6b !important; color: #fff; }
#again, .nav-btn {
background: #4a90e2; color: #fff; font-weight: 600;
}
#again:hover, .nav-btn:hover { background: #357abd; }
#question { font-weight: 700; font-size: 1.1rem; margin-bottom: 15px; }
#progress, #vocabProgress { margin-bottom: 12px; font-size: 0.95rem; color: #666; text-align: right; }

/* Флеш-карточка для Dizionario */
#dictArea { display: none; }
.vocab-card {
width: 100%; max-width: 520px; height: 180px;
margin: 16px auto;
perspective: 1000px;
}
.vocab-inner {
position: relative; width: 100%; height: 100%;
transition: transform 0.6s; transform-style: preserve-3d;
cursor: pointer;
}
.vocab-card.flipped .vocab-inner { transform: rotateY(180deg); }
.vocab-face {
position: absolute; inset: 0;
display: flex; align-items: center; justify-content: center;
font-size: 1.6rem; font-weight: 700; color: #333;
background: #f8f8f8; border: 2px solid #4a90e2; border-radius: 10px;
backface-visibility: hidden;
}
.vocab-back { transform: rotateY(180deg); }
.vocab-controls {
max-width: 520px; margin: 0 auto; display: grid; gap: 8px;
grid-template-columns: 1fr 1fr 1fr;
}

/* Декоративные «достопримечательности» внизу */
/*#landmarks { position: fixed; left:0; right:0; bottom:0; height:110px; z-index:1; pointer-events:none; }
#landmarks svg { width:100%; height:100%; fill: rgba(0,0,0,0.12); }
</style>
</head>
<body>
<div class="container">
<h2>Mini Test Italiano</h2>*/

<!-- Меню категорий -->
<div id="menu">
<h3>Seleziona la categoria:</h3>
<div id="categories"></div>
</div>

<!-- Подменю выбора карточки -->
<div id="subMenu" style="display:none;">
<h3>Seleziona la scheda:</h3>
<div id="cards"></div>
<button class="nav-btn" onclick="showMenu()">Torna al menu</button>
</div>

<!-- Область тестов (варианты ответов) -->
<div id="testArea" style="display:none;">
<div id="progress"></div>
<p id="question"></p>
<div id="options"></div>
<p id="result"></p>
<button id="again" class="nav-btn" onclick="showMenu()">Scegli un altro test</button>
</div>

<!-- Область словаря (флеш-карточки) -->
<div id="dictArea">
<div id="vocabProgress"></div>
<div class="vocab-card" id="vocabCard">
<div class="vocab-inner" id="vocabInner">
<div class="vocab-face vocab-front" id="vocabFront">parola</div>
<div class="vocab-face vocab-back" id="vocabBack">traduzione</div>
</div>
</div>
<div class="vocab-controls">
<button class="nav-btn" id="flipBtn" onclick="flipVocab()">Mostra traduzione</button>
<button class="nav-btn" id="nextBtn" onclick="nextVocab()">Avanti</button>
<button class="nav-btn" onclick="backToCards()">Torna alle schede</button>
</div>
</div>
</div>

<!-- Низ страницы: стилизованные «очертания» -->
<div id="landmarks">
<svg viewBox="0 0 1000 120" preserveAspectRatio="xMidYMax slice" aria-hidden="true">
<path d="M40,100 L60,40 L80,100 Z" />
<path d="M140,100 L160,55 L180,100 Z" />
<path d="M240,100 L250,60 L260,100 Z" />
<path d="M340,100 L355,50 L370,100 Z" />
<path d="M440,100 L455,60 L470,100 Z" />
<path d="M540,100 L555,40 L570,100 Z" />
<path d="M640,100 L655,70 L670,100 Z" />
<path d="M740,100 L755,55 L770,100 Z" />
<path d="M840,100 L855,65 L870,100 Z" />
<path d="M940,100 L955,45 L970,100 Z" />
</svg>
</div>

<script>
/* ========= УТИЛИТЫ ========= */
function shuffle(array){
for(let i=array.length-1;i>0;i--){
const j=Math.floor(Math.random()*(i+1));
[array[i],array[j]]=[array[j],array[i]];
}
return array;
}

/* ========= ДАННЫЕ ТЕСТОВ ========= */
const tests = {
"Verbi": {
"Scheda 1": [
{q:"Io ___ italiano.", options:["parlo","parla","parli"], a:"parlo"},
{q:"Tu ___ a scuola.", options:["vai","va","andiamo"], a:"vai"},
{q:"Lui ___ un libro.", options:["legge","leggo","leggono"], a:"legge"},
{q:"Noi ___ musica.", options:["ascoltiamo","ascoltano","ascolto"], a:"ascoltiamo"},
{q:"Voi ___ la cena.", options:["mangiate","mangiano","mangio"], a:"mangiate"},
{q:"Loro ___ al parco.", options:["vanno","va","andate"], a:"vanno"},
{q:"Io ___ un caffè.", options:["prendo","prende","prendiamo"], a:"prendo"},
{q:"Tu ___ la macchina.", options:["guidi","guida","guidiamo"], a:"guidi"}
],
"Scheda 2": [
{q:"Lei ___ al lavoro.", options:["va","vanno","vai"], a:"va"},
{q:"Noi ___ un film.", options:["vediamo","vedono","vede"], a:"vediamo"},
{q:"Voi ___ la verità.", options:["sapete","sa","sanno"], a:"sapete"},
{q:"Loro ___ felici.", options:["sono","sei","siamo"], a:"sono"},
{q:"Io ___ un messaggio.", options:["scrivo","scrive","scriviamo"], a:"scrivo"},
{q:"Tu ___ la risposta.", options:["sai","sa","sappiamo"], a:"sai"},
{q:"Lui ___ piano.", options:["cammina","cammino","camminano"], a:"cammina"},
{q:"Noi ___ in giardino.", options:["giochiamo","giocano","gioca"], a:"giochiamo"}
],
"Scheda 3": [
{q:"Voi ___ la porta.", options:["aprite","apre","apro"], a:"aprite"},
{q:"Loro ___ le lettere.", options:["scrivono","scrive","scriviamo"], a:"scrivono"},
{q:"Io ___ con il cane.", options:["gioco","gioca","giochiamo"], a:"gioco"},
{q:"Tu ___ la lezione.", options:["capisci","capisce","capite"], a:"capisci"},
{q:"Lei ___ un film.", options:["guarda","guardiamo","guardano"], a:"guarda"},
{q:"Noi ___ al mercato.", options:["andiamo","va","vanno"], a:"andiamo"},
{q:"Voi ___ in macchina.", options:["guidate","guida","guidiamo"], a:"guidate"},
{q:"Loro ___ a casa.", options:["tornano","torna","torniamo"], a:"tornano"}
],
"Scheda 4": [
{q:"Io ___ (dovere).", options:["devo","deve","devono"], a:"devo"},
{q:"Tu ___ (volere).", options:["vuoi","voglio","vuole"], a:"vuoi"},
{q:"Lui ___ (uscire).", options:["esce","esco","uscite"], a:"esce"},
{q:"Noi ___ (andare).", options:["andiamo","vado","vanno"], a:"andiamo"},
{q:"Voi ___ (dare).", options:["date","do","danno"], a:"date"},
{q:"Io ___ (tenere).", options:["tengo","tieni","tiene"], a:"tengo"},
{q:"Tu ___ (salire).", options:["sali","salgo","sale"], a:"sali"},
{q:"Loro ___ (scendere).", options:["scendono","scende","scendo"], a:"scendono"}
],
"Scheda 5": [
{q:"Io ___ (alzarsi) alle sette.", options:["mi alzo","si alzo","ti alzo"], a:"mi alzo"},
{q:"Tu ___ (vestirsi) velocemente.", options:["ti vesti","mi vesti","si vesti"], a:"ti vesti"},
{q:"Lui ___ (lavarsi) le mani.", options:["si lava","mi lava","ti lava"], a:"si lava"},
{q:"Noi ___ (chiamarsi) Rossi.", options:["ci chiamiamo","vi chiamiamo","si chiamiamo"], a:"ci chiamiamo"},
{q:"Voi ___ (svegliarsi) tardi.", options:["vi svegliate","si svegliate","ci svegliate"], a:"vi svegliate"},
{q:"Loro ___ (divertirsi) molto.", options:["si divertono","vi divertono","ci divertono"], a:"si divertono"},
{q:"Io ___ (pettinarsi) ogni mattina.", options:["mi pettino","si pettino","ti pettino"], a:"mi pettino"},
{q:"Tu ___ (truccarsi) per la festa.", options:["ti trucchi","mi trucchi","si trucchi"], a:"ti trucchi"},
{q:"Lei ___ (addormentarsi) presto.", options:["si addormenta","mi addormenta","ti addormenta"], a:"si addormenta"},
{q:"Noi ___ (incontrarsi) al bar.", options:["ci incontriamo","vi incontriamo","si incontriamo"], a:"ci incontriamo"}
],
"Scheda 6": [
{q:"Voi ___ (rilassarsi) al mare.", options:["vi rilassate","si rilassate","ci rilassate"], a:"vi rilassate"},
{q:"Loro ___ (arrabbiarsi) facilmente.", options:["si arrabbiano","ci arrabbiano","vi arrabbiano"], a:"si arrabbiano"},
{q:"Io ___ (mettersi) il cappotto.", options:["mi metto","ti metto","si metto"], a:"mi metto"},
{q:"Tu ___ (sentirsi) bene oggi?", options:["ti senti","mi senti","si senti"], a:"ti senti"},
{q:"Lui ___ (sposarsi) domani.", options:["si sposa","ti sposa","mi sposa"], a:"si sposa"},
{q:"Noi ___ (preoccuparsi) per te.", options:["ci preoccupiamo","vi preoccupiamo","si preoccupiamo"], a:"ci preoccupiamo"},
{q:"Voi ___ (ricordarsi) della lezione.", options:["vi ricordate","ci ricordate","si ricordate"], a:"vi ricordate"},
{q:"Loro ___ (sposarsi) in giugno.", options:["si sposano","vi sposano","ci sposano"], a:"si sposano"},
{q:"Io ___ (sedersi) vicino alla finestra.", options:["mi siedo","ti siedo","si siedo"], a:"mi siedo"},
{q:"Tu ___ (muoversi) lentamente.", options:["ti muovi","mi muovi","si muovi"], a:"ti muovi"}
],
"Scheda 7": [
{q:"Lei ___ (annoiarsi) a scuola.", options:["si annoia","mi annoia","ti annoia"], a:"si annoia"},
{q:"Noi ___ (abbracciarsi) spesso.", options:["ci abbracciamo","vi abbracciamo","si abbracciamo"], a:"ci abbracciamo"},
{q:"Voi ___ (prepararsi) per uscire.", options:["vi preparate","ci preparate","si preparate"], a:"vi preparate"},
{q:"Loro ___ (scriversi) ancora.", options:["si scrivono","vi scrivono","ci scrivono"], a:"si scrivono"},
{q:"Io ___ (chiedersi) perché.", options:["mi chiedo","ti chiedo","si chiedo"], a:"mi chiedo"},
{q:"Tu ___ (accorgersi) del problema.", options:["ti accorgi","mi accorgi","si accorgi"], a:"ti accorgi"},
{q:"Lui ___ (vergognarsi) di parlare.", options:["si vergogna","mi vergogna","ti vergogna"], a:"si vergogna"},
{q:"Noi ___ (aiutarsi) sempre.", options:["ci aiutiamo","vi aiutiamo","si aiutiamo"], a:"ci aiutiamo"},
{q:"Voi ___ (scusarsi) con lui.", options:["vi scusate","ci scusate","si scusate"], a:"vi scusate"},
{q:"Loro ___ (farsi) la doccia.", options:["si fanno","ci fanno","vi fanno"], a:"si fanno"}
],
"Scheda 8 Passato Prossimo": [
{q:"Io ___ (mangiare) una pizza.", options:["ho mangiato","sono mangiato","hai mangiato"], a:"ho mangiato"},
{q:"Tu ___ (comprare) un libro.", options:["hai comprato","ho comprato","ha comprato"], a:"hai comprato"},
{q:"Lui ___ (andare) al mare.", options:["è andato","ha andato","sei andato"], a:"è andato"},
{q:"Noi ___ (vedere) un film.", options:["abbiamo visto","sono visto","avete visto"], a:"abbiamo visto"},
{q:"Voi ___ (fare) i compiti.", options:["avete fatto","hanno fatto","hai fatto"], a:"avete fatto"},
{q:"Loro ___ (essere) felici.", options:["sono stati","hanno stati","siete stati"], a:"sono stati"},
{q:"Io ___ (alzarsi) tardi.", options:["mi sono alzato","mi ho alzato","si è alzato"], a:"mi sono alzato"},
{q:"Tu ___ (lavarsi) le mani.", options:["ti sei lavato","si è lavato","mi sono lavato"], a:"ti sei lavato"},
{q:"Lei ___ (vestirsi) elegante.", options:["si è vestita","si ha vestita","si sono vestita"], a:"si è vestita"},
{q:"Noi ___ (svegliarsi) presto.", options:["ci siamo svegliati","ci abbiamo svegliati","vi siete svegliati"], a:"ci siamo svegliati"}
],
"Scheda 9 Passato Prossimo": [
{q:"Voi ___ (chiamarsi) ieri.", options:["vi siete chiamati","vi avete chiamati","si siete chiamati"], a:"vi siete chiamati"},
{q:"Loro ___ (divertirsi) molto.", options:["si sono divertiti","si hanno divertiti","si è divertito"], a:"si sono divertiti"},
{q:"Io ___ (scrivere) una lettera.", options:["ho scritto","sono scritto","hai scritto"], a:"ho scritto"},
{q:"Tu ___ (bere) un caffè.", options:["hai bevuto","hai bevuta","sei bevuto"], a:"hai bevuto"},
{q:"Lui ___ (mettere) la giacca.", options:["ha messo","è messo","ho messo"], a:"ha messo"},
{q:"Noi ___ (aprire) la finestra.", options:["abbiamo aperto","siamo aperti","avete aperto"], a:"abbiamo aperto"},
{q:"Voi ___ (dire) la verità.", options:["avete detto","siete detti","abbiamo detto"], a:"avete detto"},
{q:"Loro ___ (leggere) il libro.", options:["hanno letto","sono letti","avete letto"], a:"hanno letto"},
{q:"Io ___ (uscire) con amici.", options:["sono uscito","ho uscito","hai uscito"], a:"sono uscito"},
{q:"Tu ___ (arrivare) tardi.", options:["sei arrivato","hai arrivato","sono arrivato"], a:"sei arrivato"}
],
"Scheda 10 Passato Prossimo": [
{q:"Lei ___ (nascere) a Roma.", options:["è nata","ha nata","sei nata"], a:"è nata"},
{q:"Noi ___ (restare) a casa.", options:["siamo restati","abbiamo restato","avete restato"], a:"siamo restati"},
{q:"Voi ___ (tornare) ieri sera.", options:["siete tornati","avete tornato","sono tornati"], a:"siete tornati"},
{q:"Loro ___ (cadere) per strada.", options:["sono caduti","hanno caduti","siete caduti"], a:"sono caduti"},
{q:"Io ___ (sentirsi) male.", options:["mi sono sentito","mi ho sentito","ti sei sentito"], a:"mi sono sentito"},
{q:"Tu ___ (arrabbiarsi) subito.", options:["ti sei arrabbiato","si è arrabbiato","mi sono arrabbiato"], a:"ti sei arrabbiato"},
{q:"Lei ___ (addormentarsi) presto.", options:["si è addormentata","si ha addormentata","si sono addormentata"], a:"si è addormentata"},
{q:"Noi ___ (incontrarsi) al bar.", options:["ci siamo incontrati","ci abbiamo incontrati","vi siete incontrati"], a:"ci siamo incontrati"},
{q:"Voi ___ (perdersi) in città.", options:["vi siete persi","vi avete persi","si siete persi"], a:"vi siete persi"},
{q:"Loro ___ (sposarsi) l’anno scorso.", options:["si sono sposati","si hanno sposati","si siete sposati"], a:"si sono sposati"}
]
},

"Preposizioni": {
"Scheda 1": [
{q:"Vado ___ scuola.", options:["a","in","di"], a:"a"},
{q:"Abito ___ Italia.", options:["in","a","su"], a:"in"},
{q:"Parto ___ Roma.", options:["per","da","in"], a:"per"},
{q:"Metto il libro ___ tavolo.", options:["sul","al","in"], a:"sul"},
{q:"Vengo ___ ufficio.", options:["in","a","da"], a:"in"},
{q:"Il gatto è ___ divano.", options:["sul","sulla","sullo"], a:"sul"},
{q:"Vado ___ letto.", options:["a","in","al"], a:"a"},
{q:"Abito ___ centro città.", options:["in","a","su"], a:"in"}
],
"Scheda 2": [
{q:"Il quadro è appeso ___ muro.", options:["al","sul","in"], a:"al"},
{q:"Metto le chiavi ___ tasca.", options:["in","a","su"], a:"in"},
{q:"Andiamo ___ cinema.", options:["al","in","a"], a:"al"},
{q:"Il regalo è ___ pacco.", options:["nel","sul","al"], a:"nel"},
{q:"Scrivo ___ amico.", options:["a","in","da"], a:"a"},
{q:"Sono ___ ufficio.", options:["in","a","da"], a:"in"},
{q:"Il cane corre ___ giardino.", options:["nel","sul","al"], a:"nel"},
{q:"Metto il cappello ___ testa.", options:["sulla","sul","al"], a:"sulla"}
],
"Scheda 3": [
{q:"Vado ___ supermercato.", options:["al","in","a"], a:"al"},
{q:"Il libro è ___ scaffale.", options:["sul","sullo","in"], a:"sul"},
{q:"L'acqua è ___ bottiglia.", options:["nella","sulla","al"], a:"nella"},
{q:"Lui vive ___ Roma.", options:["a","in","da"], a:"a"},
{q:"Cammino ___ parco.", options:["nel","al","in"], a:"nel"},
{q:"Il regalo è ___ tavolo.", options:["sul","al","in"], a:"sul"},
{q:"Metto il cappotto ___ appendino.", options:["sull'","sul","al"], a:"sull'"},
{q:"Vado ___ letto.", options:["a","in","al"], a:"a"}
]
},

"Articoli": {
"Scheda 1": [
{q:"___ libro è interessante.", options:["Il","Lo","La"], a:"Il"},
{q:"___ casa è grande.", options:["La","Il","Lo"], a:"La"},
{q:"___ amici sono simpatici.", options:["Gli","I","Le"], a:"Gli"},
{q:"___ mela è rossa.", options:["La","Il","Lo"], a:"La"},
{q:"___ orologio è nuovo.", options:["L'","Il","Lo"], a:"L'"},
{q:"___ finestre sono pulite.", options:["Le","I","Gli"], a:"Le"},
{q:"___ zaino è pesante.", options:["Lo","Il","La"], a:"Lo"},
{q:"___ studente studia.", options:["Lo","Il","La"], a:"Lo"}
],
"Scheda 2": [
{q:"___ ragazze cantano.", options:["Le","Gli","I"], a:"Le"},
{q:"___ alberi sono alti.", options:["Gli","I","Le"], a:"Gli"},
{q:"___ cane dorme.", options:["Il","Lo","La"], a:"Il"},
{q:"___ acqua è fresca.", options:["L'","Il","La"], a:"L'"},
{q:"___ uomini parlano.", options:["Gli","I","Le"], a:"Gli"},
{q:"___ scuola è vicina.", options:["La","Il","Lo"], a:"La"},
{q:"___ film è interessante.", options:["Il","Lo","La"], a:"Il"},
{q:"___ amici sono felici.", options:["Gli","I","Le"], a:"Gli"}
],
"Scheda 3": [
{q:"___ casa è piccola.", options:["La","Il","Lo"], a:"La"},
{q:"___ insegnante arriva.", options:["L'","Il","Lo"], a:"L'"},
{q:"___ libri sono nuovi.", options:["I","Gli","Le"], a:"I"},
{q:"___ finestre sono aperte.", options:["Le","Gli","I"], a:"Le"},
{q:"___ ragazzo legge.", options:["Il","Lo","La"], a:"Il"},
{q:"___ penne sono sul tavolo.", options:["Le","Gli","I"], a:"Le"},
{q:"___ alberi crescono.", options:["Gli","I","Le"], a:"Gli"},
{q:"___ macchina è rossa.", options:["La","Il","Lo"], a:"La"}
]
},

/* ===== Новая категория: Dizionario (флеш-карточки) ===== */
"Dizionario": {
"Scheda 1": [
{it:"mela",ru:"яблоко"},{it:"pera",ru:"груша"},{it:"banana",ru:"банан"},{it:"arancia",ru:"апельсин"},{it:"mandarino",ru:"мандари́н"},
{it:"limone",ru:"лимон"},{it:"uva",ru:"виноград"},{it:"ciliegia",ru:"вишня"},{it:"fragola",ru:"клубника"},{it:"pesca",ru:"персик"},
{it:"albicocca",ru:"абрикос"},{it:"melone",ru:"дыня"},{it:"anguria",ru:"арбуз"},{it:"kiwi",ru:"киви"},{it:"ananas",ru:"ананас"},
{it:"mirtillo",ru:"черника"},{it:"lampone",ru:"малина"},{it:"susina",ru:"слива"},{it:"fico",ru:"инжир"},{it:"melograno",ru:"гранат"},

{it:"pomodoro",ru:"помидор"},{it:"cetriolo",ru:"огурец"},{it:"carota",ru:"морковь"},{it:"cipolla",ru:"лук"},{it:"aglio",ru:"чеснок"},
{it:"patata",ru:"картофель"},{it:"peperone",ru:"перец"},{it:"melanzana",ru:"баклажан"},{it:"zucchina",ru:"кабачок"},{it:"zucca",ru:"тыква"},
{it:"broccolo",ru:"брокколи"},{it:"cavolfiore",ru:"цветная капуста"},{it:"cavolo",ru:"капуста"},{it:"lattuga",ru:"латук (салат)"},{it:"spinaci",ru:"шпинат"},
{it:"bietola",ru:"свёкла"},{it:"ravanello",ru:"редис"},{it:"sedano",ru:"сельдерей"},{it:"asparago",ru:"спаржа"},{it:"carciofo",ru:"артишок"},
{it:"fagiolo",ru:"фасоль"},{it:"pisello",ru:"горох"},{it:"lenticchia",ru:"чечевица"},{it:"ceci",ru:"нут"},{it:"mais",ru:"кукуруза"},
{it:"rapa",ru:"репа"},{it:"funghi",ru:"грибы"},{it:"erba cipollina",ru:"лук зелёный"},{it:"prezzemolo",ru:"петрушка"},{it:"basilico",ru:"базилик"}
],
"Scheda 2": [
{it:"sopra sopra a",ru:"на"},{it:"sotto sotto a",ru:"под"},{it:"dietro dietro a",ru:"позади"},{it:"davanti a",ru:"перед"},{it:"di fronte a",ru:"перед"},
{it:"accanto a",ru:"рядом"},{it:"vicino a",ru:"около рядом"},{it:"lontano da",ru:"далеко"},{it:"durante",ru:"во время"},{it:"entro",ru:"в течение"},
{it:"fra tra",ru:"между среди через"},{it:"fuori di",ru:"вне снаружи"},{it:"in fondo a",ru:"в конце в глубине"},{it:"avanti",ru:"вперед"},{it:"dritto",ru:"прямо"},
{it:"girаre",ru:"поворачивать"},{it:"all`angolo",ru:"на углу"},{it:"prima di",ru:"перед (отъездом)"},{it:"a destra di",ru:"справа от"},{it:"attraverso",ru:"через"}
],
"Scheda 3 Verbi": [
{it:"sedere",ru:"сидеть"},{it:"togliere",ru:"снимать убирать"},{it:"spegnere",ru:"гасить включать"},{it:"spendere",ru:"тратить"},{it:"uscire",ru:"выходить"},
{it:"spingere",ru:"толкать"},{it:"vedere",ru:"видеть"},{it:"stare",ru:"находиться быть"},{it:"venire",ru:"приходить"},{it:"tacere",ru:"молчать"},
{it:"vincere",ru:"побеждать"},{it:"tenere",ru:"держать"},{it:"vivere",ru:"жить"},{it:"volere",ru:"хотеть"},{it:"rimanere",ru:"оставаться"},
{it:"perdere",ru:"терять"},{it:"risolvere",ru:"решать проблему вопрос"},{it:"piacere",ru:"нравиться"},{it:"rispondere",ru:"отвечать"},{it:"piangere",ru:"плакать"},
{it:"potere",ru:"мочь"},{it:"rompere",ru:"ломать"},{it:"prendere",ru:"брать"},{it:"salire",ru:"подниматься"},{it:"prendere",ru:"брать"},
{it:"produrre",ru:"производить"},{it:"sapere",ru:"знать уметь"},{it:"proporre",ru:"предлагать"},{it:"scegliere",ru:"выбирать"},{it:"ridere",ru:"смеяться"}
],
"Scheda 4 Verbi riflessivi": [
{it:"svegliàrsi",ru:"просыпаться"},{it:"alzàrsi",ru:"вставать"},{it:"lavàrsi",ru:"мыться"},{it:"vestirsi",ru:"одеваться"},{it:"mettersi",ru:"надевать на себя"},
{it:"chiamàrsi",ru:"называться"},{it:"sedérsi",ru:"садиться"},{it:"sentírsi",ru:"чувствовать себя"},{it:"rilassàrsi",ru:"расслабляться"},{it:"arrabbiàrsi",ru:"злиться"},
{it:"divertirsi",ru:"развлекатьcя"},{it:"innamoràrsi",ru:"влюбляться"},{it:"sposàrsi",ru:"жениться выходить замуж"},{it:"lamentàrsi",ru:"жаловаться"},{it:"stancàrsi",ru:"уставать"},
{it:"ricordàrsi",ru:"вспоминать"},{it:"dimenticàrsi",ru:"забывать"},{it:"riposàrsi",ru:"отдыхать"},{it:"fermàrsi",ru:"останавливаться"},{it:"muòversi",ru:"двигаться"},
{it:"trovarsi",ru: "находиться"},{it:"incontràrsi",ru:"встречаться"},{it:"baciàrsi",ru:"целоваться"},{it:"abbracciàrsi",ru:"обниматься"},
{it:"conoscérsi",ru:"знакомиться"},{it:"salutàrsi",ru:"здороваться  прощаться"},{it:"preparàrsi",ru:"готовиться"},{it:"addormentàrsi",ru:"засыпать"},
{it:"farsi la doccia",ru:"принимать душ"},{it:"truccàrsi",ru:"краситься"}
]
}
};

/* ========= СОСТОЯНИЕ ========= */
let currentCategory = null;
let questions = [];
let current = 0;
let score = 0;

/* Для словаря */
let vocabList = [];
let vocabIndex = 0;
let vocabFlipped = false;

/* ========= ПЕРЕКЛЮЧЕНИЯ ЭКРАНОВ ========= */
function showMenu(){
document.getElementById("menu").style.display = "block";
document.getElementById("subMenu").style.display = "none";
document.getElementById("testArea").style.display = "none";
document.getElementById("dictArea").style.display = "none";
document.getElementById("again").style.display = "none";
}

function selectCategory(cat){
currentCategory = cat;
const cardsDiv = document.getElementById("cards");
cardsDiv.innerHTML = "";
Object.keys(tests[cat]).forEach(card=>{
const btn = document.createElement("button");
btn.textContent = card;
btn.className = "card-btn";
btn.onclick = ()=>selectCard(cat, card);
cardsDiv.appendChild(btn);
});
document.getElementById("menu").style.display = "none";
document.getElementById("subMenu").style.display = "block";
}

function backToCards(){
/* Возврат из словаря к выбору «Scheda» */
document.getElementById("dictArea").style.display = "none";
document.getElementById("subMenu").style.display = "block";
}

/* ========= ЗАПУСК ВЫБРАННОЙ СХЕДЫ ========= */
function selectCard(cat, card){
if(cat === "Dizionario"){
startVocab(tests["Dizionario"][card]);
return;
}
questions = tests[cat][card];
current = 0; score = 0;
document.getElementById("subMenu").style.display = "none";
document.getElementById("testArea").style.display = "block";
showQuestion();
}

/* ========= ТЕСТЫ (MCQ) ========= */
function showQuestion(){
const q = questions[current];
document.getElementById("question").textContent = q.q;
document.getElementById("progress").textContent = `Domanda ${current+1} di ${questions.length}`;
const optionsDiv = document.getElementById("options");
optionsDiv.innerHTML = "";
shuffle([...q.options]).forEach(opt=>{
const btn = document.createElement("button");
btn.textContent = opt;
btn.className = "option";
btn.onclick = ()=>checkAnswer(opt, q.a);
optionsDiv.appendChild(btn);
});
document.getElementById("result").textContent = "";
}

function checkAnswer(user, correct){
[...document.querySelectorAll(".option")].forEach(b=>{
b.disabled = true;
if(b.textContent === correct) b.classList.add("correct");
if(b.textContent === user && user !== correct) b.classList.add("wrong");
});
if(user === correct) score++;
setTimeout(()=>{
current++;
if(current < questions.length) showQuestion();
else showResult();
}, 600);
}

function showResult(){
document.getElementById("question").textContent = "";
document.getElementById("options").innerHTML = "";
document.getElementById("result").textContent = `Hai risposto correttamente a ${score} di ${questions.length} domande!`;
document.getElementById("again").style.display = "block";
}

/* ========= СЛОВАРЬ (ФЛЕШ-КАРТОЧКИ) ========= */
function startVocab(list){
vocabList = shuffle([...list]); // перемешаем слова при каждом запуске
vocabIndex = 0; vocabFlipped = false;
document.getElementById("subMenu").style.display = "none";
document.getElementById("testArea").style.display = "none";
document.getElementById("dictArea").style.display = "block";
renderVocab();
}

function renderVocab(){
const total = vocabList.length;
document.getElementById("vocabProgress").textContent = `Parola ${vocabIndex+1} di ${total}`;
const front = document.getElementById("vocabFront");
const back = document.getElementById("vocabBack");
front.textContent = vocabList[vocabIndex].it;
back.textContent = vocabList[vocabIndex].ru;
const card = document.getElementById("vocabCard");
const inner = document.getElementById("vocabInner");
// Сброс переворота
card.classList.remove("flipped");
// Клик по карточке тоже переворачивает
card.onclick = flipVocab;
// Обновим текст кнопки flip
document.getElementById("flipBtn").textContent = vocabFlipped ? "Mostra parola" : "Mostra traduzione";
}

function flipVocab(){
const card = document.getElementById("vocabCard");
vocabFlipped = !vocabFlipped;
if(vocabFlipped) card.classList.add("flipped");
else card.classList.remove("flipped");
document.getElementById("flipBtn").textContent = vocabFlipped ? "Mostra parola" : "Mostra traduzione";
}

function nextVocab(){
vocabIndex = (vocabIndex + 1) % vocabList.length;
vocabFlipped = false;
renderVocab();
}

/* ========= ИНИЦИАЛИЗАЦИЯ КАТЕГОРИЙ ========= */
const catDiv = document.getElementById("categories");
Object.keys(tests).forEach(cat=>{
const btn = document.createElement("button");
btn.textContent = cat; /* Verbi, Preposizioni, Articoli, Vocabolario,TEST */
btn.className = "category-btn";
btn.onclick = ()=>selectCategory(cat);
catDiv.appendChild(btn);
});

// Показать меню сразу при загрузке
showMenu();
</script>
</body>
</html>
